.container-fluid.px-4{'data-controller' => 'app-users'}
  .d-flex
    .flex-grow-1= render 'shared/header_title', title: t('app_user.app_users')

  = render "filters"
  = render "shared/no_data", items: @app_users

  - if @app_users.present?
    = render "shared/pagination_title", objects: @app_users

    .table-responsive
      %table.table.table-hover.pretty
        %thead
          %tr
            %th #
            %th= t('app_user.gender')
            %th= t('app_user.age')
            %th= t('app_user.province')
            %th= t('shared.device_id')
            %th= t('app_user.registered_at')
            %th= t('shared.created_at')

        %tbody
          - @app_users.each_with_index do |app_user, index|
            %tr
              %td= @pagy.from + index
              %td
                - if app_user.anonymous?
                  %span{'data-bs-toggle': 'tooltip', title: t('app_user.anonymous')}
                    %i.fa-solid.fa-user-secret
                - else
                  = app_user.gender

              %td
                = app_user.age unless app_user.anonymous?

              %td
                = app_user.province["name_#{I18n.locale}"] unless app_user.anonymous?
              %td= app_user.device_id
              %td= timeago(app_user.registered_at).html_safe
              %td= timeago(app_user.created_at).html_safe

    - if @pagy.pages > 1
      .d-flex.pagy-wrapper.justify-content-lg-end.justify-content-center
        != pagy_bootstrap_nav(@pagy)
